{"ast":null,"code":"var _jsxFileName = \"/home/rodolfoarv/Documents/batman/Creditea/c_client/src/components/Form/Form.jsx\";\nimport React from 'react';\nimport Container from 'react-bulma-components/lib/components/container';\nimport Columns from 'react-bulma-components/lib/components/columns';\nimport Button from 'react-bulma-components/lib/components/button';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport IframeComm from \"react-iframe-comm\";\nimport logo from \"../../media/logo.png\";\nimport AutoComplete from 'react-autocomplete';\nimport { Field, Control, Label, Input, Checkbox, Select } from 'react-bulma-components/lib/components/form';\nimport { toast } from 'react-toastify';\n\nconst GattaiFrame = ({}) => {\n  // the html attributes to create the iframe with\n  // make sure you use camelCase attribute names\n  const attributes = {\n    src: 'http://localhost:4000',\n    width: \"1%\",\n    height: \"175\",\n    frameBorder: 1 // show frame border just for fun...\n\n  }; // the postMessage data you want to send to your iframe\n  // it will be send after the iframe has loaded\n\n  const postMessageData = \"hello iframe\"; // parent received a message from iframe\n\n  const onReceiveMessage = event => {\n    //console.log(\"onReceiveMessage\")\n    //https://stackoverflow.com/questions/25098021/securityerror-blocked-a-frame-with-origin-from-accessing-a-cross-origin-frame\n    if (event.origin != 'http://localhost:4000') return;\n    const userData = event.data['0'];\n    console.log(userData);\n  }; // iframe has loaded\n\n\n  const onReady = () => {\n    console.log(\"onReady\");\n  };\n\n  return React.createElement(IframeComm, {\n    attributes: attributes,\n    postMessageData: postMessageData,\n    handleReady: onReady,\n    handleReceiveMessage: onReceiveMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  });\n};\n\nclass Form extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...this.props.initialState\n    };\n    this.dateToShow = new Date();\n    this.isLoading = false;\n    this.fields = this.props.fields;\n\n    this.renderSelectOptions = opts => Object.entries(opts).map(o => React.createElement(\"option\", {\n      key: o[0],\n      value: o[0],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, o[1]));\n\n    this.handleFocus = event => event.target.select();\n\n    this.renderSingleField = field => {\n      switch (field.type) {\n        case 'select':\n          return React.createElement(Select, {\n            name: field.key,\n            onChange: this.onChange,\n            value: this.state[field.key],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91\n            },\n            __self: this\n          }, React.createElement(\"option\", {\n            value: \"\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          }, \"Select...\"), field.options && this.renderSelectOptions(field.options));\n\n        case 'checkbox':\n          return React.createElement(Checkbox, Object.assign({}, field, {\n            name: field.key,\n            onChange: this.onChange,\n            checked: this.state.active_flag,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104\n            },\n            __self: this\n          }), field.label);\n\n        default:\n          return React.createElement(Input, Object.assign({}, field, {\n            name: field.key,\n            onChange: this.onChange,\n            value: this.state[field.key],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113\n            },\n            __self: this\n          }));\n      }\n    };\n\n    this.renderFields = fields => {\n      return fields.map(field => {\n        const isCheckbox = field.type === 'checkbox';\n        return React.createElement(Field, {\n          key: `field-${field.key}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, !isCheckbox && React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, field.label), React.createElement(Control, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, this.renderSingleField(field)));\n      });\n    };\n\n    this.onChange = evt => {\n      const value = evt.target.type === 'checkbox' ? evt.target.checked : evt.target.value;\n      this.setState({\n        [evt.target.name]: value\n      });\n    };\n\n    this.validate = () => {\n      const keys = Object.entries(this.props.initialState).map(e => e[0]);\n      let isValid = true;\n\n      for (let i = 0; i < keys.length; i++) {\n        if (!this.state[keys[i]]) {\n          if (typeof this.state[keys[i]] === \"number\" && this.state[keys[i]] === 0) {\n            break;\n          }\n\n          isValid = false;\n          toast.warn('All fields are required');\n          break;\n        }\n      } // To prevent duplicate alert\n\n\n      if (!isValid) return isValid;\n      const {\n        shouldNotExist\n      } = this.props;\n\n      if (shouldNotExist) {\n        for (let j = 0; j < shouldNotExist.length; j++) {\n          if (Object.entries(this.fbCollection).find(record => record[1][shouldNotExist[j]] === this.state[shouldNotExist[j]])) {\n            // if exists\n            isValid = false;\n            toast.warn(`Field: ${shouldNotExist[j]} can't be duplicated`);\n            break;\n          }\n        }\n      }\n\n      return isValid;\n    };\n\n    this.save = () => {\n      this.props.onSave && this.props.onSave(this.state);\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, this.state.returnToCollection && this.renderRedirect(), React.createElement(Container, {\n      className: 'pad-und-md fb-form',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(Columns, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Columns.Column, {\n      size: \"half\",\n      offset: \"one-quarter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Columns, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(Columns.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"logo\",\n      alt: \"Creditea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    })), React.createElement(Columns.Column, {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(GattaiFrame, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \" \")), React.createElement(Columns.Column, {\n      size: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, this.renderFields(this.fields), React.createElement(Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Control, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }))), React.createElement(Columns.Column, {\n      size: \"half\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"solid\",\n      onClick: this.save,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"Save\")), React.createElement(Columns.Column, {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.props.after))))));\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["/home/rodolfoarv/Documents/batman/Creditea/c_client/src/components/Form/Form.jsx"],"names":["React","Container","Columns","Button","BrowserRouter","Switch","Route","IframeComm","logo","AutoComplete","Field","Control","Label","Input","Checkbox","Select","toast","GattaiFrame","attributes","src","width","height","frameBorder","postMessageData","onReceiveMessage","event","origin","userData","data","console","log","onReady","Form","Component","state","props","initialState","dateToShow","Date","isLoading","fields","renderSelectOptions","opts","Object","entries","map","o","handleFocus","target","select","renderSingleField","field","type","key","onChange","options","active_flag","label","renderFields","isCheckbox","evt","value","checked","setState","name","validate","keys","e","isValid","i","length","warn","shouldNotExist","j","fbCollection","find","record","save","onSave","render","returnToCollection","renderRedirect","textAlign","after"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Container from 'react-bulma-components/lib/components/container';\nimport Columns from 'react-bulma-components/lib/components/columns';\nimport Button from 'react-bulma-components/lib/components/button';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport IframeComm from \"react-iframe-comm\";\nimport logo from \"../../media/logo.png\";\nimport AutoComplete from 'react-autocomplete'\n\n\nimport {\n    Field,\n    Control,\n    Label,\n    Input,\n    Checkbox,\n    Select\n  } from 'react-bulma-components/lib/components/form';\n  import {toast} from 'react-toastify';\n\n\n  const GattaiFrame = ({}) => {\n\n      // the html attributes to create the iframe with\n      // make sure you use camelCase attribute names\n      const attributes = {\n          src: 'http://localhost:4000',\n          width: \"1%\",\n          height: \"175\",\n          frameBorder: 1, // show frame border just for fun...\n      };\n\n      // the postMessage data you want to send to your iframe\n      // it will be send after the iframe has loaded\n      const postMessageData = \"hello iframe\";\n\n      // parent received a message from iframe\n      const onReceiveMessage = (event) => {\n          //console.log(\"onReceiveMessage\")\n          //https://stackoverflow.com/questions/25098021/securityerror-blocked-a-frame-with-origin-from-accessing-a-cross-origin-frame\n          if (event.origin != 'http://localhost:4000') return\n          const userData = event.data['0']\n          console.log(userData)\n\n      };\n\n      // iframe has loaded\n      const onReady = () => {\n          console.log(\"onReady\");\n      };\n\n      return (\n          <IframeComm\n              attributes={attributes}\n              postMessageData={postMessageData}\n              handleReady={onReady}\n              handleReceiveMessage={onReceiveMessage}\n          />\n      );\n  };\n\nclass Form extends React.Component {\n\n\n\n\n\n    state = {\n        ...this.props.initialState,\n    };\n\n    dateToShow = new Date();\n\n\n    isLoading = false;\n\n    fields = this.props.fields;\n\n    renderSelectOptions = opts => (\n        Object.entries(opts).map(o => (\n            <option key={o[0]} value={o[0]}>{o[1]}</option>\n        ))\n    )\n\n    handleFocus = event => event.target.select();\n\n    renderSingleField = field => {\n        switch(field.type) {\n            case 'select':\n                return (\n                    <Select\n                        name={field.key}\n                        onChange={this.onChange}\n                        value={this.state[field.key]}\n                    >\n                        <option value=''>Select...</option>\n                        {\n                            field.options &&\n                            this.renderSelectOptions(field.options)\n                        }\n                    </Select>\n                );\n            case 'checkbox':\n                return (<Checkbox\n                    {...field}\n                    name={field.key}\n                    onChange={this.onChange}\n                    checked={this.state.active_flag}\n                >\n                    {field.label}\n                </Checkbox>);\n            default:\n                return (<Input\n                        {...field}\n                        name={field.key}\n                        onChange={this.onChange}\n                        value={this.state[field.key]}\n                    />)\n        }\n    }\n\n    renderFields = fields => {\n        return fields.map(field => {\n        const isCheckbox = field.type === 'checkbox';\n            return (\n                <Field key={`field-${field.key}`}>\n                    {   !isCheckbox &&\n                        <Label>{field.label}</Label>\n                    }\n                    <Control>\n                        {this.renderSingleField(field)}\n                    </Control>\n                </Field>\n            )\n        });\n    }\n\n    onChange = evt => {\n        const value = evt.target.type === 'checkbox' ? evt.target.checked : evt.target.value;\n        this.setState({\n          [evt.target.name]: value,\n        });\n    };\n\n\n\n    validate = () => {\n        const keys = Object.entries(this.props.initialState).map(e => e[0]);\n        let isValid = true;\n        for (let i = 0; i < keys.length; i++) {\n            if (!this.state[keys[i]]) {\n                if (typeof this.state[keys[i]] === \"number\" && this.state[keys[i]] === 0) {\n                    break;\n                }\n\n                isValid = false;\n                toast.warn('All fields are required');\n                break;\n            }\n        }\n\n        // To prevent duplicate alert\n        if (!isValid) return isValid;\n\n        const {\n            shouldNotExist,\n        } = this.props;\n\n        if (shouldNotExist) {\n            for (let j = 0; j < shouldNotExist.length; j++) {\n                if (Object.entries(this.fbCollection).find(record => record[1][shouldNotExist[j]] === this.state[shouldNotExist[j]])) { // if exists\n                    isValid = false;\n                    toast.warn(`Field: ${shouldNotExist[j]} can't be duplicated`);\n                    break;\n                }\n            }\n        }\n\n        return isValid;\n    }\n\n    save = () => {\n        this.props.onSave && this.props.onSave(this.state);\n    }\n\n    render() {\n        return (\n            <div>\n                {\n                    this.state.returnToCollection &&\n                    this.renderRedirect()\n                }\n\n\n\n\n                <Container className={'pad-und-md fb-form'}>\n                    <Columns>\n                        <Columns.Column size='half' offset='one-quarter'>\n                            <Columns>\n                                <Columns.Column>\n                                    <img src={logo} className=\"logo\" alt=\"Creditea\" />\n                                </Columns.Column>\n\n                                <Columns.Column style={{textAlign: 'center'}}>\n                                    <GattaiFrame> </GattaiFrame>\n                                </Columns.Column>\n\n\n                                <Columns.Column size={12}>\n                                    {this.renderFields(this.fields)}\n                                <Field>\n                                <Control>\n\n                                </Control>\n                                </Field>\n                                </Columns.Column>\n                                <Columns.Column size='half'>\n                                    <Button className='solid' onClick={this.save}>Save</Button>\n                                </Columns.Column>\n                                <Columns.Column style={{textAlign: 'center'}}>\n                                    {this.props.after}\n                                </Columns.Column>\n                            </Columns>\n                        </Columns.Column>\n                    </Columns>\n                </Container>\n\n            </div>\n        )\n    }\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}